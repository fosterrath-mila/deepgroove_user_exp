<html>
    <head>
        <title>DeepDrummer Experiment</title>
        <link rel="stylesheet" href="/static/style.css">
        <link rel='shortcut icon' type='image/png' href='/static/assets/shortcut.png'>
    </head>
    <body>
        <script>
            function startTimer(duration, display)
            {
                var timer = duration;

                function update()
                {
                    var minutes = parseInt(timer / 60, 10);
                    var seconds = parseInt(timer % 60, 10);

                    minutes = minutes < 10 ? "0" + minutes : minutes;
                    seconds = seconds < 10 ? "0" + seconds : seconds;

                    display.textContent = minutes + ":" + seconds;

                    if (--timer < 0)
                    {
                        timer = 0;
                        // Here we reactivate the button which proceeds to
                        // the rest of the application.
                        document.getElementById("proceed_btn").disabled = false;
                    }
                }

                // Do the first update now so we immediately see the time
                update();

                setInterval(update, 1000);
            }

            window.onload = function ()
            {
                let pauseTime = {{ pause_time }};
                let display = document.querySelector('#time');
                startTimer(pauseTime, display);
            };
        </script>

        <h1>DeepDrummer Experiment</h1>
        <h2>Step 3/4: Brief Pause</h2>
        <div class="contents">
            <p>
                Please wait while we train a model based on your preferences.
            </p>

            <p>You may continue to the next step in <span id="time" style="font-weight:bold">00:00</span> minutes.</p>

            <form action="{{ url_for('final') }}">
                <p><button type="submit" id="proceed_btn" disabled>Continue</button></p>
            </form>
        </div>
    </body>
</html>
