<html>
    <head>
        <title>DeepDrummer experiment</title>
        <link rel="stylesheet" href="/static/style.css">
        <script>
            window.onload = function ()
            {
                let btn_good = document.getElementById("btn_good");
                let btn_bad = document.getElementById("btn_bad");
                let audio = document.getElementById("audio");

                // This is meant to give the user some clear visual
                // feedback when the next trial begins
                function greyButtons()
                {
                    btn_good.style.background = '#777';
                    btn_bad.style.background = '#777';
                    audio.pause();
                }

                btn_good.onclick = greyButtons;
                btn_bad.onclick = greyButtons;

                // Start playback when the space key is pressed
                window.onkeydown = function (evt)
                {
                    if (evt.key == ' ')
                        audio.play();
                }
            }
        </script>
    </head>
    <body>
        <h1>DeepDrummer Experiment</h1>
        <h2>{{ step_name }}</h2>

        <div class="contents">
            <p>
                Please listen to the audio clip below and give your appreciation
                by clicking one of the two buttons labeled "good" or "bad".
            </p>
            <div align="center">
                <p>Trial: {{ trial }}</p>
                <audio id="audio" controls>
                    <source src="{{ clip_url }}" align="center" type="audio/wav">
                    Your browser does not support the audio element.
                    Please use Firefox or Chrome.
                </audio>
            </div>
            <form id="user_validation" align="center" action="{{ url_for('trial') }}" method="post">
                <input type="hidden" name="id" value="{{ clip_id }}">
                <div style="margin: 6px">
                    <input id="btn_good" type="submit" name="rating" value="good" style="margin: 6px; margin-right: 8px; font-size: 18px; background: #0F0;">
                    <input id="btn_bad" type="submit" name="rating" value="bad" style="margin: 6px; margin-right: 8px; font-size: 18px; background: #F00;">
                </div>
             </form>
            <p>User: {{ session['user_email'] }}</p>
        </div>

    </body>
</html>
